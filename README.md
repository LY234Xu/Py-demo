# 在线手写字体识别系统

这是一个基于Python开发的在线手写字体识别系统，能够识别用户在界面上绘制的手写字符。系统采用前后端分离的架构，前端使用PySide6构建交互式GUI，后端使用PyTorch实现深度学习模型进行字符识别。

## 项目功能

- **交互式绘画界面**：用户可以在画布上自由绘制字符
- **字符识别**：系统能够识别手写的数字和字母
- **图像处理**：支持图像预处理、裁剪、归一化等操作
- **异步处理**：采用异步识别机制，避免UI卡顿
- **图像导入导出**：支持导入已有图像和导出绘制内容
- **模型训练**：支持训练和保存自定义模型

## 项目结构

```
Py-demo/
├── main.py               # 主程序入口
├── pyproject.toml        # 项目配置和依赖
├── src/
│   ├── __init__.py       # 包初始化
│   ├── frontend/         # 前端界面模块
│   │   ├── __init__.py
│   │   ├── drawing_widget.py  # 绘画组件
│   │   └── main_window.py     # 主窗口
│   └── backend/          # 后端处理模块
│       ├── __init__.py
│       ├── preprocessor.py    # 图像预处理
│       └── recognizer.py      # 字符识别器
├── models/               # 模型存储目录
└── README.md             # 项目文档
```

## 安装指南

### 系统要求

- Python 3.8+
- PySide6
- PyTorch
- NumPy
- OpenCV

### 安装步骤

1. 克隆或下载项目代码到本地

2. 安装项目依赖
   ```bash
   pip install -e .
   ```

   或者手动安装所需库
   ```bash
   pip install pyside6 torch torchvision numpy opencv-python
   ```

## 使用说明

### 运行应用

1. 启动图形界面
   ```bash
   python main.py
   ```

2. 训练模型（可选）
   ```bash
   python main.py --train --epochs 10
   ```

### 界面操作

- **绘制字符**：在左侧画布区域使用鼠标绘制字符
- **清空画布**：点击「清空」按钮清除画布内容
- **识别字符**：点击「识别」按钮进行字符识别
- **导入图片**：点击「导入图片」按钮加载已有图像
- **导出图片**：点击「导出图片」按钮保存当前绘制内容

## 技术实现

### 前端实现

- **PySide6**：用于构建跨平台的图形用户界面
- **DrawingWidget**：自定义绘画组件，支持鼠标事件处理和图像保存
- **MainWindow**：主窗口类，整合各个组件和功能按钮

### 后端实现

- **图像预处理**：使用OpenCV进行图像降噪、二值化、裁剪和缩放
- **深度学习模型**：使用PyTorch实现卷积神经网络模型
- **异步处理**：采用多线程机制实现异步识别，避免GUI界面卡顿

## 模型说明

系统使用一个简单的卷积神经网络模型，包含以下层：

- 卷积层（3x3卷积核，6通道）
- 最大池化层（2x2）
- 卷积层（3x3卷积核，16通道）
- 最大池化层（2x2）
- 全连接层（120个神经元）
- 全连接层（84个神经元）
- 输出层（36个神经元，对应数字和字母）

## 优化与改进

- **异步处理**：实现了异步识别功能，避免GUI界面卡顿
- **错误处理**：添加了完善的异常捕获和错误提示
- **用户体验**：优化了界面布局和交互流程

## 注意事项

- 首次运行时，由于使用随机初始化模型，识别准确率可能较低
- 建议在训练集上训练模型以提高识别准确率
- 绘制字符时尽量居中，避免过细或过粗的笔触
- 对于复杂字符可能需要多次尝试以获得准确结果

## 许可证

本项目仅供学习和参考使用。